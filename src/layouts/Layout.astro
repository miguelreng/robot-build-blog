---
import Navigation from '../components/Navigation.astro';
const { title, builder, published, quarter, department } = Astro.props;
const isPublish = Astro.url.pathname === '/publish';
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>{title} | CEO & Builders</title>
		<meta name="description" content="Engineering memos and technical progress from the builders at Robot.com." />
		<style is:global>
			@font-face {
				font-family: 'Yellix';
				src: url('/fonts/Yellix-Regular.ttf') format('truetype');
				font-weight: 400;
				font-style: normal;
				font-display: swap;
			}
			@font-face {
				font-family: 'Yellix';
				src: url('/fonts/Yellix-Medium.ttf') format('truetype');
				font-weight: 500;
				font-style: normal;
				font-display: swap;
			}
			@font-face {
				font-family: 'Yellix';
				src: url('/fonts/Yellix-SemiBold.ttf') format('truetype');
				font-weight: 600;
				font-style: normal;
				font-display: swap;
			}
			@font-face {
				font-family: 'Yellix';
				src: url('/fonts/Yellix-Bold.ttf') format('truetype');
				font-weight: 700;
				font-style: normal;
				font-display: swap;
			}
			@font-face {
				font-family: 'Yellix';
				src: url('/fonts/Yellix-ExtraBold.ttf') format('truetype');
				font-weight: 800;
				font-style: normal;
				font-display: swap;
			}
			@font-face {
				font-family: 'Yellix';
				src: url('/fonts/Yellix-Black.ttf') format('truetype');
				font-weight: 900;
				font-style: normal;
				font-display: swap;
			}
            body {
				font-family: 'Yellix', system-ui, sans-serif;
				background-color: theme('colors.brand.gray.10');
				color: theme('colors.brand.gray.90');
				-webkit-font-smoothing: antialiased;
				font-feature-settings: "ss01" on;
				margin: 0;
				padding: 0;
                font-size: 15px;
                overflow-x: hidden;
			}
            
            *:focus {
                outline: none !important;
            }

			/* GLOBAL TEXT NORMALIZE */
            h1, h2, h3, h4, h5 { font-weight: 600; margin: 0; letter-spacing: 0; }
            h1 { font-size: 32px; }
            h2 { font-size: 24px; }
            p, li {
                font-weight: 600;
                margin: 0;
                font-size: 0.9em;
                color: theme('colors.brand.gray.90/80');
            }
            

		</style>
	</head>
	<body class="selection:bg-brand-gray-90 selection:text-brand-gray-10">
        <Navigation isPublish={isPublish} />
		<main class="w-full flex flex-col items-center py-20 md:py-32">
			<div class={`w-full ${isPublish ? 'max-w-[1200px]' : 'max-w-[900px]'} px-6 md:px-12 space-y-8`}>

                {published && (
                    <div class="w-full mb-8">
                        <a href="/" class="inline-flex items-center gap-2 text-brand-gray-90/40 hover:text-brand-gray-90 transition-colors font-semibold text-sm group">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" class="stroke-current stroke-2 group-hover:-translate-x-1 transition-transform" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
                            Home
                        </a>
                    </div>
                )}

				<div class="w-full">
					<slot />
				</div>
                
                <footer class="pt-16 border-t border-brand-gray-90/5 flex flex-col items-center gap-10 w-full">
                    <img src="/logo-robot.svg" alt="Robot.com" class="h-4 w-auto opacity-20" />
                    <div class="text-[14px] text-brand-gray-90/30 font-medium text-center">
                        Â© {new Date().getFullYear()} Robot.com  All rights reserved.
                    </div>
                </footer>
			</div>
		</main>

        <script>
            if (localStorage.getItem('builder_status') === 'authorized') {
                const logout = document.getElementById('nav-logout');
                if (logout) {
                    logout.classList.remove('hidden');
                    logout.addEventListener('click', () => {
                        localStorage.removeItem('builder_status');
                        window.location.href = '/';
                    });
                }
            }
        </script>
	</body>
</html>
