---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('posts');
posts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<Layout title="Home">
	<section class="mb-32">
		<h1 class="text-6xl md:text-8xl font-medium tracking-tighter mb-8 leading-[0.85] text-black">
			The Build
		</h1>
		<p class="text-zinc-400 text-xl md:text-2xl leading-relaxed max-w-2xl font-light">
			Vetted engineering memos. Behind the scenes of the intelligence powering the future of delivery and general robotics.
		</p>
	</section>

	<div class="space-y-px bg-zinc-100">
		{posts.map((post) => (
			<a href={`/posts/${post.slug}`} class="group block bg-white py-14 hover:bg-zinc-50 transition-colors -mx-6 px-6">
				<div class="flex flex-col md:flex-row md:items-baseline justify-between gap-6">
					<div>
						<div class="text-[10px] uppercase tracking-[0.3em] text-zinc-300 mb-3 group-hover:text-zinc-500 transition-colors">
							{post.data.pubDate.toLocaleDateString('en-US', { year: 'numeric', month: '2-digit', day: '2-digit' })}
						</div>
						<h2 class="text-4xl font-medium tracking-tight text-black">
							{post.data.title}
						</h2>
					</div>
					<div class="text-[10px] font-bold uppercase tracking-[0.2em] text-zinc-300 group-hover:text-black transition-colors flex items-center gap-2">
						Read Memo <span class="text-lg">â†’</span>
					</div>
				</div>
				<p class="text-zinc-400 text-lg leading-relaxed mt-6 max-w-2xl line-clamp-2 font-light">
					{post.data.description}
				</p>
			</a>
		))}
	</div>
</Layout>
