---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('posts');
posts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<Layout title="Home">
	<section class="mb-32">
		<h1 class="text-5xl md:text-7xl font-medium tracking-tighter mb-8 leading-[0.9]">
			The Build
		</h1>
		<p class="text-zinc-500 text-xl md:text-2xl leading-relaxed max-w-2xl font-light">
			Vetted engineering memos. Behind the scenes of the intelligence powering the future of delivery and general robotics.
		</p>
	</section>

	<div class="space-y-1">
		{posts.map((post) => (
			<a href={`/posts/${post.slug}`} class="group block border-t border-white/5 py-12 hover:bg-white/[0.02] transition-colors -mx-6 px-6">
				<div class="flex flex-col md:flex-row md:items-baseline justify-between gap-4">
					<div>
						<div class="text-[10px] uppercase tracking-[0.2em] text-zinc-600 mb-2 group-hover:text-zinc-400 transition-colors">
							{post.data.pubDate.toLocaleDateString('en-US', { year: 'numeric', month: '2-digit', day: '2-digit' })}
						</div>
						<h2 class="text-3xl font-medium tracking-tight">
							{post.data.title}
						</h2>
					</div>
					<div class="text-sm font-medium uppercase tracking-widest text-zinc-600 group-hover:text-white transition-colors">
						Read Memo â†’
					</div>
				</div>
				<p class="text-zinc-500 text-lg leading-relaxed mt-4 max-w-xl line-clamp-2">
					{post.data.description}
				</p>
			</a>
		))}
		<div class="border-t border-white/5"></div>
	</div>
</Layout>
